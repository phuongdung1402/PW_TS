// Cấu trúc file hệ thống sẽ xây dựng cho bộ fixture của chúng ta
//chia nhỏ trách nhiệm ra 3 file chính :
//1 File auth.fixture.ts (tầng 1 và tầng 2): chứa logic login và tạo ra "người gác cổng"
//2 File app.fixture.ts ( tầng 3): chứa công thức tạo ra các POM (dashboard, customer)
//3 File gatekeeper.fixture.ts (tổng hành dinh): nơi hợp nhất tất cả lại để sử dụng


// Để hiển thị 1 trang web khi sử dụng thằng fixture Page thì PW đi qua 4 tầng kiến tạo
tầng 1 : Browser type (bản vẽ thiết kế)
- là các biến chromium, firefox , webkit
- nó nằm im lìm chưa chạy

tầng 2 : browser (tòa nhà khách sạn)
- đc tạo bằng lệnh launch
-> lúc phần mềm chrome (firefox, webkit) đc bật lên ở trong task manager 

tầng 3: context 
- đc tạo ra bằng new context 
- nơi cách ly dữ liệu (cookies, session)

tầng 4: page -> tab chúng ta đang làm việc
-được tạo ra từ lệnh newPage
-nơi thao tác click/fill......


Cấu trúc chuẩn cho 2 môi trường (dev và stagging)
.env (1.cấu hình chung - ai cũng giống nhau)
.env.development(2. Cấu hình riêng cho dev)
.env.development.local(3. Bí mật chỉ máy bạn có - ko up lên git)
.env.stagging (4. Cấu hình cho môi trường stagging)

..vị trí ở root (thư mục gốc) ngang hàng với package.json

dotenv - flow: thứ tự ưu tiên là 
//biến phụ thuộc là NODE_ENV = abc
.env.[NODE_ENV].local hoặc .env[NODE_ENV]

1. .env (độ ưu tiên thấp nhất)
2. .env.development (trung bình)
3. .env.development.local(cao nhất ở môi trường dev)
4. .env.stagging (cao nhất ở môi trường stagging)

// Nguyên tắc -> cái load sau sẽ ghi đè cái load trước
trên phiếu NODE_ENV ghi development -> thủ thư sẽ tìm tất cả môi trường có tên .env.development

trường hợp mà NODE_ENV ghi stagging -> thủ thư sẽ tìm cả môi trường có tên .env.stagging

Để lấy thông tin biến môi trường ta dùng process.env.key mà ta mong muốn
process.env.BASE_URL -> https://dev.crm.anhtester.com


// Dotenv flow hay dotenv hoạt động dựa trên process.cwd() (curent working directory - thư mục hiện tại đang gõ lệnh)

// Trên windows -> terminal là powershell
trên gitbash/mac/linux/ -> mặc định

WIND
$env:NODE_ENV="stagging"; npx playwright test ./tests/env-demo.spec.ts

mac 
NODE_ENV= stagging npx playwright test ./tests/env-demo.spec.ts


